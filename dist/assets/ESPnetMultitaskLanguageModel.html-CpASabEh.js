import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as n,c as l,f as o,b as e,d as i,e as r,w as p,a as t,o as m}from"./app-KOUU_Wij.js";const c={},d=t('<h1 id="espnet2-lm-espnet-model-multitask-espnetmultitasklanguagemodel" tabindex="-1"><a class="header-anchor" href="#espnet2-lm-espnet-model-multitask-espnetmultitasklanguagemodel"><span>espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel</span></a></h1><div class="custom-h3"><p><em>class</em> espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel<span class="small-bracket">(lm: <a href="AbsLM.md#espnet2.lm.abs_model.AbsLM">AbsLM</a></span>, vocab_size: int, token_list: Tuple[str, ...] | List[str], ignore_id: int = 0, lsm_weight: float = 0.0, length_normalized_loss: bool = False, sos_syms: List[str] = [&#39;&lt;generatetext&gt;&#39;, &#39;&lt;generatespeech&gt;&#39;], eos_sym: str = &#39;&lt;sos/eos&gt;&#39;)</p></div>',2),h=e("code",null,"AbsESPnetModel",-1),u=t('<p>Initializes internal Module state, shared by both nn.Module and ScriptModule.</p><div class="custom-h4"><p>batchify_nll<span class="small-bracket">(text: Tensor, text_lengths: Tensor, batch_size: int = 100)</span></p></div><p>Compute negative log likelihood(nll) from transformer language model</p><p>To avoid OOM, this fuction seperate the input into batches. Then call nll for each batch and combine and return results. :param text: (Batch, Length) :param text_lengths: (Batch,) :param batch_size: int, samples each batch contain when computing nll,</p><blockquote><p>you may change this to avoid OOM or increase</p></blockquote><div class="custom-h4"><p>collect_feats<span class="small-bracket">(text: Tensor, text_lengths: Tensor, **kwargs)</span></p></div><div class="custom-h4"><p>forward<span class="small-bracket">(text: Tensor, text_lengths: Tensor, **kwargs)</span></p></div><p>Defines the computation performed at every call.</p><p>Should be overridden by all subclasses.</p><h5 id="note" tabindex="-1"><a class="header-anchor" href="#note"><span>NOTE</span></a></h5><p>Although the recipe for forward pass needs to be defined within this function, one should call the <code>Module</code> instance afterwards instead of this since the former takes care of running the registered hooks while the latter silently ignores them.</p><div class="custom-h4"><p>nll<span class="small-bracket">(text: Tensor, text_lengths: Tensor, max_length: int | None = None)</span></p></div><p>Compute negative log likelihood (nll)</p><p>NOTE(yifan): We only use nll to calculate perplexity, : so there is no condition in each sentence.</p><p>Normally, this function is called in batchify_nll. :param text: (Batch, Length) :param text_lengths: (Batch,) :param max_lengths: int</p><div class="custom-h4"><p>training <em>: bool</em></p></div>',16);function g(_,b){const s=n("RouteLink");return m(),l("div",null,[o(" _espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel "),d,e("p",null,[i("Bases: "),r(s,{to:"/guide/espnet2/train/AbsESPnetModel.html#espnet2.train.abs_espnet_model.AbsESPnetModel"},{default:p(()=>[h]),_:1})]),u])}const M=a(c,[["render",g],["__file","ESPnetMultitaskLanguageModel.html.vue"]]),v=JSON.parse(`{"path":"/guide/espnet2/lm/ESPnetMultitaskLanguageModel.html","title":"espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel","lang":"en-US","frontmatter":{},"headers":[],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":1.02,"words":306},"filePathRelative":"guide/espnet2/lm/ESPnetMultitaskLanguageModel.md","excerpt":"<!-- _espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel -->\\n<h1>espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel</h1>\\n<div class=\\"custom-h3\\"><p><em>class</em> espnet2.lm.espnet_model_multitask.ESPnetMultitaskLanguageModel<span class=\\"small-bracket\\">(lm: <a href=\\"AbsLM.md#espnet2.lm.abs_model.AbsLM\\">AbsLM</a></span>, vocab_size: int, token_list: Tuple[str, ...] | List[str], ignore_id: int = 0, lsm_weight: float = 0.0, length_normalized_loss: bool = False, sos_syms: List[str] = ['&lt;generatetext&gt;', '&lt;generatespeech&gt;'], eos_sym: str = '&lt;sos/eos&gt;')</p></div>"}`);export{M as comp,v as data};
