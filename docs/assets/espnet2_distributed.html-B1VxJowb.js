import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,a as t}from"./app-KOUU_Wij.js";const e={},n=t(`<h1 id="distributed-training" tabindex="-1"><a class="header-anchor" href="#distributed-training"><span>Distributed training</span></a></h1><p>ESPnet2 provides some kinds of data-parallel distributed training.</p><table><thead><tr><th></th><th>DP/DDP</th><th>Single/Multi host</th><th>Option</th></tr></thead><tbody><tr><td>Multi-processing with single host</td><td>DistributedDataParallel</td><td>Single</td><td>--ngpu <code>N-GPU</code> --multiprocessing_distributed true</td></tr><tr><td>Multi-threading with single host</td><td>DataParallel</td><td>Single</td><td>--ngpu <code>N-GPU</code> --multiprocessing_distributed false</td></tr><tr><td>Multi-processing with <code>N-HOST</code> jobs with <code>N-GPU</code> for each host (=<code>N-HOST</code>x<code>N-GPU</code> nodes)</td><td>DistributedDataParallel</td><td>Multi</td><td>--dist_world_size <code>N-HOST</code> --ngpu <code>N-GPU</code> --multiprocessing_distributed true</td></tr><tr><td>Multi-threading with <code>N-HOST</code> jobs with <code>N-GPU</code> for each host (=<code>N-HOST</code>x<code>N-GPU</code> nodes)</td><td>DistributedDataParallel</td><td>Multi</td><td>--dist_world_size <code>N-HOST</code> --ngpu <code>N-GPU</code> --multiprocessing_distributed false</td></tr><tr><td><code>N-NODE</code> jobs with <code>1-GPU</code> for each node</td><td>DistributedDataParallel</td><td>Single/Multi</td><td>--dist_world_size <code>N-NODE</code> --ngpu 1</td></tr></tbody></table><h2 id="examples" tabindex="-1"><a class="header-anchor" href="#examples"><span>Examples</span></a></h2><p>Note: The behavior of batch size in ESPnet2 during multi-GPU training is different from that in ESPnet1. <strong>In ESPnet2, the total batch size is not changed regardless of the number of GPUs.</strong> Therefore, you need to manually increase the batch size if you increase the number of GPUs. Please refer to this <a href="https://espnet.github.io/espnet/espnet2_training_option.html#the-relation-between-mini-batch-size-and-number-of-gpus" target="_blank" rel="noopener noreferrer">doc</a> for more information.</p><h3 id="single-node-with-4gpus-with-distributed-mode" tabindex="-1"><a class="header-anchor" href="#single-node-with-4gpus-with-distributed-mode"><span>Single node with 4GPUs with distributed mode</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You can disable distributed mode and switch to threading based data parallel as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If you meet some errors with distributed mode, please try single gpu mode or multi-GPUs with <code>--multiprocessing_distributed false</code> before reporting the issue.</p><h3 id="to-enable-sharded-training" tabindex="-1"><a class="header-anchor" href="#to-enable-sharded-training"><span>To enable sharded training</span></a></h3><p>We supports sharded training provided by <a href="https://github.com/facebookresearch/fairscale" target="_blank" rel="noopener noreferrer">fairscale</a></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --sharded_ddp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note that the other features of fairscale are not supported now.</p><h3 id="_2host-and-2gpus-for-each-host-with-multiprocessing-distributed-mode" tabindex="-1"><a class="header-anchor" href="#_2host-and-2gpus-for-each-host-with-multiprocessing-distributed-mode"><span>2Host and 2GPUs for each host with multiprocessing distributed mode</span></a></h3><p>Note that multiprocessing distributed mode assumes the same number of GPUs for each node.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">host1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_rank</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_world_size</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_addr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">host2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_rank</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_world_size</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_addr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="rank-and-world-size" tabindex="-1"><a class="header-anchor" href="#rank-and-world-size"><span>RANK and WORLD_SIZE</span></a></h4><p><code>--dist_rank</code> and <code>--dist_world_size</code> indicate <code>RANK</code> and <code>WORLD_SIZE</code> in terms of MPI; i.e., they indicate the id of each processe and the number of processes respectively. They can be also specified by the environment variables <code>\${RANK}</code> and <code>\${WORLD_SIZE}</code>.</p><h4 id="about-init-method" tabindex="-1"><a class="header-anchor" href="#about-init-method"><span>About init method</span></a></h4><p>See: https://pytorch.org/docs/stable/distributed.html#tcp-initialization</p><p>There are two ways to initialize and <strong>these methods can be interchanged</strong> in all examples.</p><ul><li><p>TCP initialization</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># These three are equivalent:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--dist_master_addr</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rank0-host</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--dist_master_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--dist_init_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;tcp://&amp;lt;rank0-host&amp;gt;:&amp;lt;any-free-port&amp;gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> MASTER_ADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rank0-host</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MASTER_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Shared file system initialization</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--dist_init_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;file:///nfs/some/where/filename&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This initialization might be failed if the previous file is existing. I recommend you to use a random file name to avoid to reuse it. e.g.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">--dist_init_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;file://$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)/.dist_init_$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rand </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_2hosts-which-have-2gpus-and-1gpu-respectively" tabindex="-1"><a class="header-anchor" href="#_2hosts-which-have-2gpus-and-1gpu-respectively"><span>2Hosts which have 2GPUs and 1GPU respectively</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">host1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_rank</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_world_size</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_addr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">host1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_rank</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_world_size</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_addr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">host2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_rank</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_world_size</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_addr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_master_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">any-free-port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gt</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2hosts-and-2gpus-for-each-node-using-slurm-with-multiprocessing-distributed" tabindex="-1"><a class="header-anchor" href="#_2hosts-and-2gpus-for-each-node-using-slurm-with-multiprocessing-distributed"><span>2Hosts and 2GPUs for each node using <code>Slurm</code> with multiprocessing distributed</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> %</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> srun</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -c2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -N2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --gres</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gpu:2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_launcher</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slurm</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_init_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;file://$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)/.dist_init_$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rand </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>I recommend shared-file initialization in this case because the host will be determined after submitting the job, therefore we can&#39;t tell the free port number before.</p><h3 id="_5gpus-with-3nodes-using-slurm" tabindex="-1"><a class="header-anchor" href="#_5gpus-with-3nodes-using-slurm"><span>5GPUs with 3nodes using <code>Slurm</code></span></a></h3><p>(Not tested)</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> srun</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n5</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -N3</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --gpus-per-task</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_launcher</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> slurm</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_init_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;file://$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)/.dist_init_$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rand </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2hosts-and-2gpus-for-each-node-using-mpi-with-multiprocessing-distributed" tabindex="-1"><a class="header-anchor" href="#_2hosts-and-2gpus-for-each-node-using-mpi-with-multiprocessing-distributed"><span>2Hosts and 2GPUs for each node using <code>MPI</code> with multiprocessing distributed</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> %</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mpirun</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -np</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -host</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host1,host2</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    python</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> espnet2.bin.asr_train</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --ngpu</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --multiprocessing_distributed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_launcher</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mpi</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --dist_init_method</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;file://$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)/.dist_init_$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rand </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">-base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="espnet2-bin-launch" tabindex="-1"><a class="header-anchor" href="#espnet2-bin-launch"><span><code>espnet2.bin.launch</code></span></a></h2><p>Coming soon...</p><h2 id="troubleshooting-for-nccl-with-ethernet-case" tabindex="-1"><a class="header-anchor" href="#troubleshooting-for-nccl-with-ethernet-case"><span>Troubleshooting for NCCL with Ethernet case</span></a></h2><ul><li><code>NCCL WARN Connect to 192.168.1.51&amp;lt;51890&amp;gt; failed : No route to host</code><ul><li>Reason: Firewall?</li><li>Need to free all ports?</li></ul></li><li><code>NCCL INFO Call to connect returned Connection refused, retrying</code><ul><li>Reason: NIC is found, but connection is refused?</li><li>Set <code>NCCL_SOCKET_IFNAME=&amp;lt;appropriate_interface&amp;gt;</code></li></ul></li><li><code>NCCL WARN Bootstrap : no socket interface found</code><ul><li>Reason: Any NIC are not found . (Maybe NCCL_SOCKET_IFNAME is incorrect)</li><li>Set <code>NCCL_SOCKET_IFNAME=&amp;lt;appropriate_interface&amp;gt;</code>.</li></ul></li><li><code>NCCL WARN peer mapping resources exhausted</code><ul><li>???</li><li>https://devtalk.nvidia.com/default/topic/970010/cuda-programming-and-performance/cuda-peer-resources-error-when-running-on-more-than-8-k80s-aws-p2-16xlarge-/post/4994583/#4994583</li></ul></li></ul><h2 id="the-rules-of-nccl-socket-ifname" tabindex="-1"><a class="header-anchor" href="#the-rules-of-nccl-socket-ifname"><span>The rules of <code>NCCL_SOCKET_IFNAME</code></span></a></h2><p>See: https://docs.nvidia.com/deeplearning/sdk/nccl-developer-guide/docs/env.html</p><ul><li>The default value is <code>NCCL_SOCKET_IFNAME=^lo,docker</code>.</li><li>Support two syntax: white list or black list</li><li>White list e.g.: <code>NCCL_SOCKET_IFNAME=eth,em</code><ul><li>It&#39;s enough to specify the prefix only. You don&#39;t need to set it as <code>eth0</code>.</li></ul></li><li>Blacklist e.g.: <code>^virbr,lo,docker</code>.</li><li>If multiple network interfaces are found in your environment, the first is selected. <ul><li>You can check your environment by <code>ifconfig</code> for example. https://www.cyberciti.biz/faq/linux-list-network-interfaces-names-command/</li><li>Note that <code>lo</code> is the first normally, so <code>lo</code> must be filtered.</li></ul></li></ul><p>My recommended setting for a non-virtual environment</p><ul><li><code>NCCL_SOCKET_IFNAME=en,eth,em,bond</code> Or, <code>NCCL_SOCKET_IFNAME=^lo,docker,virbr,vmnet,vboxnet,wl,ww,ppp</code></li></ul><table><thead><tr><th>The prefix of network interface name</th><th>Note</th></tr></thead><tbody><tr><td>lo</td><td>Loopback.</td></tr><tr><td>eth</td><td>Ethernet. Classically used.</td></tr><tr><td>em</td><td>Ethernet. Dell machine?</td></tr><tr><td>en</td><td>Ethernet (Used in recent Linux. e.g CentOS7)</td></tr><tr><td>wlan</td><td>Wireless</td></tr><tr><td>wl</td><td>Wireless LAN (Used in recent Linux)</td></tr><tr><td>ww</td><td>Wireless wan (Used in recent Linux)</td></tr><tr><td>ib</td><td>IP over IB</td></tr><tr><td>bond</td><td>Bonding of multiple ethernets</td></tr><tr><td>virbr</td><td>Virtual bridge</td></tr><tr><td>docker,vmnet,vboxnet</td><td>Virtual machine</td></tr><tr><td>ppp</td><td>Point to point</td></tr></tbody></table>`,43),h=[n];function l(d,r){return a(),s("div",null,h)}const o=i(e,[["render",l],["__file","espnet2_distributed.html.vue"]]),g=JSON.parse('{"path":"/espnet2_distributed.html","title":"Distributed training","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Examples","slug":"examples","link":"#examples","children":[{"level":3,"title":"Single node with 4GPUs with distributed mode","slug":"single-node-with-4gpus-with-distributed-mode","link":"#single-node-with-4gpus-with-distributed-mode","children":[]},{"level":3,"title":"To enable sharded training","slug":"to-enable-sharded-training","link":"#to-enable-sharded-training","children":[]},{"level":3,"title":"2Host and 2GPUs for each host with multiprocessing distributed mode","slug":"_2host-and-2gpus-for-each-host-with-multiprocessing-distributed-mode","link":"#_2host-and-2gpus-for-each-host-with-multiprocessing-distributed-mode","children":[]},{"level":3,"title":"2Hosts which have 2GPUs and 1GPU respectively","slug":"_2hosts-which-have-2gpus-and-1gpu-respectively","link":"#_2hosts-which-have-2gpus-and-1gpu-respectively","children":[]},{"level":3,"title":"2Hosts and 2GPUs for each node using Slurm with multiprocessing distributed","slug":"_2hosts-and-2gpus-for-each-node-using-slurm-with-multiprocessing-distributed","link":"#_2hosts-and-2gpus-for-each-node-using-slurm-with-multiprocessing-distributed","children":[]},{"level":3,"title":"5GPUs with 3nodes using Slurm","slug":"_5gpus-with-3nodes-using-slurm","link":"#_5gpus-with-3nodes-using-slurm","children":[]},{"level":3,"title":"2Hosts and 2GPUs for each node using MPI with multiprocessing distributed","slug":"_2hosts-and-2gpus-for-each-node-using-mpi-with-multiprocessing-distributed","link":"#_2hosts-and-2gpus-for-each-node-using-mpi-with-multiprocessing-distributed","children":[]}]},{"level":2,"title":"espnet2.bin.launch","slug":"espnet2-bin-launch","link":"#espnet2-bin-launch","children":[]},{"level":2,"title":"Troubleshooting for NCCL with Ethernet case","slug":"troubleshooting-for-nccl-with-ethernet-case","link":"#troubleshooting-for-nccl-with-ethernet-case","children":[]},{"level":2,"title":"The rules of NCCL_SOCKET_IFNAME","slug":"the-rules-of-nccl-socket-ifname","link":"#the-rules-of-nccl-socket-ifname","children":[]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":3.24,"words":973},"filePathRelative":"espnet2_distributed.md","excerpt":"\\n<p>ESPnet2 provides some kinds of data-parallel distributed training.</p>\\n<table>\\n<thead>\\n<tr>\\n<th></th>\\n<th>DP/DDP</th>\\n<th>Single/Multi host</th>\\n<th>Option</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>Multi-processing with single host</td>\\n<td>DistributedDataParallel</td>\\n<td>Single</td>\\n<td>--ngpu <code>N-GPU</code> --multiprocessing_distributed true</td>\\n</tr>\\n<tr>\\n<td>Multi-threading with single host</td>\\n<td>DataParallel</td>\\n<td>Single</td>\\n<td>--ngpu <code>N-GPU</code> --multiprocessing_distributed false</td>\\n</tr>\\n<tr>\\n<td>Multi-processing with <code>N-HOST</code> jobs with <code>N-GPU</code> for each host (=<code>N-HOST</code>x<code>N-GPU</code> nodes)</td>\\n<td>DistributedDataParallel</td>\\n<td>Multi</td>\\n<td>--dist_world_size <code>N-HOST</code> --ngpu <code>N-GPU</code> --multiprocessing_distributed true</td>\\n</tr>\\n<tr>\\n<td>Multi-threading with <code>N-HOST</code> jobs with <code>N-GPU</code> for each host (=<code>N-HOST</code>x<code>N-GPU</code> nodes)</td>\\n<td>DistributedDataParallel</td>\\n<td>Multi</td>\\n<td>--dist_world_size <code>N-HOST</code> --ngpu <code>N-GPU</code> --multiprocessing_distributed false</td>\\n</tr>\\n<tr>\\n<td><code>N-NODE</code> jobs with <code>1-GPU</code> for each node</td>\\n<td>DistributedDataParallel</td>\\n<td>Single/Multi</td>\\n<td>--dist_world_size <code>N-NODE</code> --ngpu 1</td>\\n</tr>\\n</tbody>\\n</table>"}');export{o as comp,g as data};
